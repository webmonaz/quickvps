import{j as s,C as te,D as De,L as Fe,A as Te,a as Ae,P as Me,b as $e,c as He,i as We,p as Le,d as Be}from"./chart-CrAta0Iv.js";import{a as Ge,r as l,g as Ue,R as qe,B as Ke,b as Je,c as Ye}from"./router-CHLAdYhn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var pe,ce=Ge;pe=ce.createRoot,ce.hydrateRoot;const Qe={},ae=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},o=()=>t,u={setState:n,getState:o,getInitialState:()=>x,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Qe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},x=t=e(n,o,u);return u},Xe=e=>e?ae(e):ae;var ye={exports:{}},be={},ge={exports:{}},je={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=l;function Ve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ze=typeof Object.is=="function"?Object.is:Ve,et=E.useState,tt=E.useEffect,rt=E.useLayoutEffect,nt=E.useDebugValue;function st(e,t){var r=t(),n=et({inst:{value:r,getSnapshot:t}}),o=n[0].inst,c=n[1];return rt(function(){o.value=r,o.getSnapshot=t,q(o)&&c({inst:o})},[e,r,t]),tt(function(){return q(o)&&c({inst:o}),e(function(){q(o)&&c({inst:o})})},[e]),nt(r),r}function q(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ze(e,r)}catch{return!0}}function ot(e,t){return t()}var ct=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ot:st;je.useSyncExternalStore=E.useSyncExternalStore!==void 0?E.useSyncExternalStore:ct;ge.exports=je;var at=ge.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=l,it=at;function lt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ut=typeof Object.is=="function"?Object.is:lt,dt=it.useSyncExternalStore,ft=H.useRef,mt=H.useEffect,xt=H.useMemo,ht=H.useDebugValue;be.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var c=ft(null);if(c.current===null){var a={hasValue:!1,value:null};c.current=a}else a=c.current;c=xt(function(){function u(p){if(!x){if(x=!0,d=p,p=n(p),o!==void 0&&a.hasValue){var g=a.value;if(o(g,p))return f=g}return f=p}if(g=f,ut(d,p))return g;var oe=n(p);return o!==void 0&&o(g,oe)?(d=p,g):(d=p,f=oe)}var x=!1,d,f,h=r===void 0?null:r;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,r,n,o]);var i=dt(e,c[0],c[1]);return mt(function(){a.hasValue=!0,a.value=i},[i]),ht(i),i};ye.exports=be;var pt=ye.exports;const yt=Ue(pt),_e={},{useDebugValue:bt}=qe,{useSyncExternalStoreWithSelector:gt}=yt;let ie=!1;const jt=e=>e;function _t(e,t=jt,r){(_e?"production":void 0)!=="production"&&r&&!ie&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ie=!0);const n=gt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return bt(n),n}const vt=e=>{(_e?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Xe(e):e,r=(n,o)=>_t(t,n,o);return Object.assign(r,t),r},St=e=>vt,Nt=e=>(t,r,n)=>{const o=n.subscribe;return n.subscribe=(a,i,u)=>{let x=a;if(i){const d=(u==null?void 0:u.equalityFn)||Object.is;let f=a(n.getState());x=h=>{const p=a(h);if(!d(f,p)){const g=f;i(f=p,g)}},u!=null&&u.fireImmediately&&i(f,f)}return o(x)},e(t,r,n)},wt=Nt;var ve=Symbol.for("immer-nothing"),le=Symbol.for("immer-draftable"),b=Symbol.for("immer-state");function j(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var P=Object.getPrototypeOf;function k(e){return!!e&&!!e[b]}function N(e){var t;return e?Se(e)||Array.isArray(e)||!!e[le]||!!((t=e.constructor)!=null&&t[le])||I(e)||L(e):!1}var Ct=Object.prototype.constructor.toString(),ue=new WeakMap;function Se(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=ue.get(r);return n===void 0&&(n=Function.toString.call(r),ue.set(r,n)),n===Ct}function T(e,t,r=!0){W(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(o=>{t(o,e[o],e)}):e.forEach((n,o)=>t(o,n,e))}function W(e){const t=e[b];return t?t.type_:Array.isArray(e)?1:I(e)?2:L(e)?3:0}function Y(e,t){return W(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ne(e,t,r){const n=W(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Et(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function I(e){return e instanceof Map}function L(e){return e instanceof Set}function S(e){return e.copy_||e.base_}function Q(e,t){if(I(e))return new Map(e);if(L(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Se(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[b];let o=Reflect.ownKeys(n);for(let c=0;c<o.length;c++){const a=o[c],i=n[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(P(e),n)}else{const n=P(e);if(n!==null&&r)return{...e};const o=Object.create(n);return Object.assign(o,e)}}function re(e,t=!1){return B(e)||k(e)||!N(e)||(W(e)>1&&Object.defineProperties(e,{set:D,add:D,clear:D,delete:D}),Object.freeze(e),t&&Object.values(e).forEach(r=>re(r,!0))),e}function kt(){j(2)}var D={value:kt};function B(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Rt={};function w(e){const t=Rt[e];return t||j(0,e),t}var O;function we(){return O}function Pt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function de(e,t){t&&(w("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X(e){V(e),e.drafts_.forEach(Ot),e.drafts_=null}function V(e){e===O&&(O=e.parent_)}function fe(e){return O=Pt(O,e)}function Ot(e){const t=e[b];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function me(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[b].modified_&&(X(t),j(4)),N(e)&&(e=A(t,e),t.parent_||M(t,e)),t.patches_&&w("Patches").generateReplacementPatches_(r[b].base_,e,t.patches_,t.inversePatches_)):e=A(t,r,[]),X(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ve?e:void 0}function A(e,t,r){if(B(t))return t;const n=e.immer_.shouldUseStrictIteration(),o=t[b];if(!o)return T(t,(c,a)=>xe(e,o,t,c,a,r),n),t;if(o.scope_!==e)return t;if(!o.modified_)return M(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const c=o.copy_;let a=c,i=!1;o.type_===3&&(a=new Set(c),c.clear(),i=!0),T(a,(u,x)=>xe(e,o,c,u,x,r,i),n),M(e,c,!1),r&&e.patches_&&w("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function xe(e,t,r,n,o,c,a){if(o==null||typeof o!="object"&&!a)return;const i=B(o);if(!(i&&!a)){if(k(o)){const u=c&&t&&t.type_!==3&&!Y(t.assigned_,n)?c.concat(n):void 0,x=A(e,o,u);if(Ne(r,n,x),k(x))e.canAutoFreeze_=!1;else return}else a&&r.add(o);if(N(o)&&!i){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===o&&i)return;A(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(I(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&M(e,o)}}}function M(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&re(t,r)}function zt(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:we(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,c=ne;r&&(o=[n],c=z);const{revoke:a,proxy:i}=Proxy.revocable(o,c);return n.draft_=i,n.revoke_=a,i}var ne={get(e,t){if(t===b)return e;const r=S(e);if(!Y(r,t))return It(e,r,t);const n=r[t];return e.finalized_||!N(n)?n:n===K(e.base_,t)?(J(e),e.copy_[t]=ee(n,e)):n},has(e,t){return t in S(e)},ownKeys(e){return Reflect.ownKeys(S(e))},set(e,t,r){const n=Ce(S(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const o=K(S(e),t),c=o==null?void 0:o[b];if(c&&c.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Et(r,o)&&(r!==void 0||Y(e.base_,t)))return!0;J(e),Z(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return K(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,J(e),Z(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=S(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){j(11)},getPrototypeOf(e){return P(e.base_)},setPrototypeOf(){j(12)}},z={};T(ne,(e,t)=>{z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});z.deleteProperty=function(e,t){return z.set.call(this,e,t,void 0)};z.set=function(e,t,r){return ne.set.call(this,e[0],t,r,e[0])};function K(e,t){const r=e[b];return(r?S(r):e)[t]}function It(e,t,r){var o;const n=Ce(t,r);return n?"value"in n?n.value:(o=n.get)==null?void 0:o.call(e.draft_):void 0}function Ce(e,t){if(!(t in e))return;let r=P(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=P(r)}}function Z(e){e.modified_||(e.modified_=!0,e.parent_&&Z(e.parent_))}function J(e){e.copy_||(e.copy_=Q(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Dt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const c=r;r=t;const a=this;return function(u=c,...x){return a.produce(u,d=>r.call(this,d,...x))}}typeof r!="function"&&j(6),n!==void 0&&typeof n!="function"&&j(7);let o;if(N(t)){const c=fe(this),a=ee(t,void 0);let i=!0;try{o=r(a),i=!1}finally{i?X(c):V(c)}return de(c,n),me(o,c)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===ve&&(o=void 0),this.autoFreeze_&&re(o,!0),n){const c=[],a=[];w("Patches").generateReplacementPatches_(t,o,c,a),n(c,a)}return o}else j(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...i)=>this.produceWithPatches(a,u=>t(u,...i));let n,o;return[this.produce(t,r,(a,i)=>{n=a,o=i}),n,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){N(e)||j(8),k(e)&&(e=Ft(e));const t=fe(this),r=ee(e,void 0);return r[b].isManual_=!0,V(t),r}finishDraft(e,t){const r=e&&e[b];(!r||!r.isManual_)&&j(9);const{scope_:n}=r;return de(n,t),me(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));const n=w("Patches").applyPatches_;return k(e)?n(e,t):this.produce(e,o=>n(o,t))}};function ee(e,t){const r=I(e)?w("MapSet").proxyMap_(e,t):L(e)?w("MapSet").proxySet_(e,t):zt(e,t);return(t?t.scope_:we()).drafts_.push(r),r}function Ft(e){return k(e)||j(10,e),Ee(e)}function Ee(e){if(!N(e)||B(e))return e;const t=e[b];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Q(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Q(e,!0);return T(r,(o,c)=>{Ne(r,o,Ee(c))},n),t&&(t.finalized_=!1),r}var Tt=new Dt,At=Tt.produce;const Mt=e=>(t,r,n)=>(n.setState=(o,c,...a)=>{const i=typeof o=="function"?At(o):o;return t(i,c,...a)},e(n.setState,r,n)),$t=Mt,R=60;function F(e,t){const r=[...e,t];return r.length>R&&r.shift(),r}const m=St()(wt($t(e=>({snapshot:null,netHistory:[Array(R).fill(0),Array(R).fill(0)],diskIOHistory:[Array(R).fill(0),Array(R).fill(0)],scanPath:"/",scanResult:null,isScanning:!1,isConnected:!1,serverInfo:null,setSnapshot:t=>e(r=>{var i,u,x,d;r.snapshot=t;const n=((i=t.network)==null?void 0:i.reduce((f,h)=>f+h.recv_bps,0))??0,o=((u=t.network)==null?void 0:u.reduce((f,h)=>f+h.sent_bps,0))??0;r.netHistory=[F(r.netHistory[0],n),F(r.netHistory[1],o)];const c=((x=t.disk_io)==null?void 0:x.reduce((f,h)=>f+h.read_bps,0))??0,a=((d=t.disk_io)==null?void 0:d.reduce((f,h)=>f+h.write_bps,0))??0;r.diskIOHistory=[F(r.diskIOHistory[0],c),F(r.diskIOHistory[1],a)]}),setScanPath:t=>e(r=>{r.scanPath=t}),setScanResult:t=>e(r=>{r.scanResult=t}),setIsScanning:t=>e(r=>{r.isScanning=t}),setConnected:t=>e(r=>{r.isConnected=t}),setServerInfo:t=>e(r=>{r.serverInfo=t})})))),Ht=l.memo(function({connected:t}){return s.jsx("span",{className:`inline-block w-2 h-2 rounded-full transition-colors ${t?"bg-accent-green shadow-[0_0_6px_#3ddc84]":"bg-accent-red"}`})}),Wt=l.memo(function(){const t=m(n=>n.isConnected),r=m(n=>n.serverInfo);return s.jsx("header",{className:"sticky top-0 z-40 flex items-center justify-between px-6 py-3 bg-bg-card border-b border-border-base",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"font-mono font-bold text-lg tracking-tight text-accent-blue",children:["Quick",s.jsx("span",{className:"text-accent-green",children:"VPS"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-secondary font-mono",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Ht,{connected:t}),s.jsx("span",{children:"Live"})]}),(r==null?void 0:r.hostname)&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"ðŸ–¥"}),s.jsx("span",{children:r.hostname})]}),(r==null?void 0:r.os)&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"âš™"}),s.jsx("span",{children:r.os})]})]})]})})}),Lt=l.memo(function(){return m(r=>r.isConnected)?null:s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-accent-red text-bg-primary text-center text-xs py-2 font-mono font-medium",children:"WebSocket disconnected â€” reconnectingâ€¦"})}),Bt=l.memo(function({children:t}){return s.jsxs("div",{className:"flex flex-col min-h-screen bg-bg-primary text-text-primary",children:[s.jsx(Wt,{}),s.jsx("main",{className:"flex-1 p-4 max-w-[1600px] mx-auto w-full",children:t}),s.jsx(Lt,{})]})}),Gt=3e3;function Ut(e){const t=m(i=>i.setSnapshot),r=m(i=>i.setConnected),n=l.useRef(null),o=l.useRef(null),c=l.useRef(e);c.current=e;const a=l.useCallback(()=>{const i=location.protocol==="https:"?"wss:":"ws:",u=new WebSocket(`${i}//${location.host}/ws`);n.current=u,u.onopen=()=>{r(!0),o.current&&(clearTimeout(o.current),o.current=null)},u.onmessage=x=>{try{const d=JSON.parse(x.data);d.type==="metrics"&&d.snapshot&&t(d.snapshot),d.ncdu_ready&&c.current()}catch(d){console.error("WS parse error:",d)}},u.onclose=()=>{r(!1),o.current=setTimeout(a,Gt)},u.onerror=()=>{u.close()}},[r,t]);l.useEffect(()=>(a(),()=>{var i;(i=n.current)==null||i.close(),o.current&&clearTimeout(o.current)}),[a])}function qt(){const e=m(t=>t.setServerInfo);l.useEffect(()=>{fetch("/api/info").then(t=>t.json()).then(e).catch(t=>console.error("Failed to load server info:",t))},[e])}function ke(){const e=m(i=>i.scanPath),t=m(i=>i.isScanning),r=m(i=>i.setScanResult),n=m(i=>i.setIsScanning),o=l.useCallback(async()=>{n(!0),r(null);try{await fetch("/api/ncdu/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})})}catch(i){console.error("Scan start error:",i),n(!1)}},[e,n,r]),c=l.useCallback(async()=>{try{await fetch("/api/ncdu/scan",{method:"DELETE"})}catch(i){console.error("Scan cancel error:",i)}n(!1),r(null)},[n,r]),a=l.useCallback(async()=>{try{const u=await(await fetch("/api/ncdu/status")).json();r(u),(u.status==="done"||u.status==="error")&&n(!1)}catch(i){console.error("fetchNcdu error:",i)}},[r,n]);return{startScan:o,cancelScan:c,fetchStatus:a,isScanning:t,scanPath:e}}function _(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}const v=l.memo(function({children:t,className:r=""}){return s.jsx("div",{className:`bg-bg-card border border-border-base rounded-card p-4 ${r}`,children:t})}),C=l.memo(function({children:t,className:r=""}){return s.jsx("div",{className:`text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3 ${r}`,children:t})}),Kt=60,Re={track:"#2a2d3e"},Pe=60,Oe=85;function G(e){return e>=Oe?"text-accent-red":e>=Pe?"text-accent-yellow":"text-accent-green"}function U(e){return e>=Oe?"#f87171":e>=Pe?"#fbbf24":"#3ddc84"}te.register(De,Fe,Te,Ae,Me,$e,He,We,Le,Be);function Jt(e){const t=U(e);return{type:"doughnut",data:{datasets:[{data:[e,100-e],backgroundColor:[t,Re.track],borderWidth:0,borderRadius:4}]},options:{circumference:180,rotation:-90,cutout:"75%",animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{enabled:!1}},responsive:!0,maintainAspectRatio:!1}}}function Yt(e,t){return e.percent===t.percent}const se=l.memo(function({percent:t}){const r=l.useRef(null),n=l.useRef(null);return l.useEffect(()=>{if(!r.current)return;const o=r.current.getContext("2d");if(o)return n.current=new te(o,Jt(0)),()=>{var c;(c=n.current)==null||c.destroy(),n.current=null}},[]),l.useEffect(()=>{const o=n.current;if(!o)return;const c=Math.min(100,Math.max(0,t)),a=U(c);o.data.datasets[0].data=[c,100-c],o.data.datasets[0].backgroundColor=[a,Re.track],o.update("none")},[t]),s.jsx("canvas",{ref:r,className:"block w-full h-full"})},Yt),Qt=l.memo(function({perCore:t}){return s.jsx("div",{className:"flex gap-1 mt-3 flex-wrap",children:t.map((r,n)=>{const o=Math.min(100,Math.round(r)),c=U(o);return s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx("div",{className:"w-3 h-12 bg-border-base rounded-sm overflow-hidden flex flex-col justify-end",children:s.jsx("div",{className:"w-full rounded-sm transition-[height] duration-300",style:{height:`${o}%`,background:c}})}),s.jsxs("span",{className:"text-[9px] text-text-muted font-mono",children:["C",n]})]},n)})})},(e,t)=>e.perCore===t.perCore),Xt=l.memo(function(){const t=m(n=>n.snapshot?{pct:Math.round(n.snapshot.cpu.total_percent),model:n.snapshot.cpu.model_name,freq:n.snapshot.cpu.freq_mhz,perCore:n.snapshot.cpu.per_core}:null,_),r=(t==null?void 0:t.pct)??0;return s.jsxs(v,{className:"flex flex-col",children:[s.jsx(C,{children:"CPU"}),s.jsxs("div",{className:"relative h-28 flex items-end justify-center",children:[s.jsx(se,{percent:r}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center mt-8",children:s.jsxs("span",{className:`text-2xl font-bold font-mono ${G(r)}`,children:[r,"%"]})})]}),s.jsx("div",{className:"text-xs text-text-secondary font-mono mt-2 truncate",title:t==null?void 0:t.model,children:(t==null?void 0:t.model)||"â€”"}),s.jsx("div",{className:"text-xs text-text-muted font-mono",children:t!=null&&t.freq?t.freq.toFixed(0)+" MHz":"â€”"}),(t==null?void 0:t.perCore)&&t.perCore.length>0&&s.jsx(Qt,{perCore:t.perCore})]})});function y(e){return e==null?"â€”":e<1024?Math.round(e)+" B":e<1024**2?(e/1024).toFixed(1)+" KB":e<1024**3?(e/1024**2).toFixed(1)+" MB":(e/1024**3).toFixed(2)+" GB"}const Vt=l.memo(function({total:t,used:r,cached:n,buffers:o}){if(t===0)return null;const c=(r/t*100).toFixed(1),a=(n/t*100).toFixed(1),i=(o/t*100).toFixed(1);return s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex h-2 w-full rounded-full overflow-hidden bg-border-base",children:[s.jsx("div",{className:"h-full bg-accent-blue",style:{width:c+"%"}}),s.jsx("div",{className:"h-full bg-accent-purple",style:{width:a+"%"}}),s.jsx("div",{className:"h-full bg-accent-cyan",style:{width:i+"%"}})]}),s.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-2 text-[10px] font-mono text-text-secondary",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-blue",children:"â– "})," Used: ",y(r)]}),s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-purple",children:"â– "})," Cache: ",y(n)]}),s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-cyan",children:"â– "})," Buf: ",y(o)]})]})]})}),Zt=l.memo(function(){const t=m(n=>n.snapshot?{pct:Math.round(n.snapshot.memory.percent),used:n.snapshot.memory.used_bytes,total:n.snapshot.memory.total_bytes,cached:n.snapshot.memory.cached,buffers:n.snapshot.memory.buffers}:null,_),r=(t==null?void 0:t.pct)??0;return s.jsxs(v,{className:"flex flex-col",children:[s.jsx(C,{children:"Memory"}),s.jsxs("div",{className:"relative h-28 flex items-end justify-center",children:[s.jsx(se,{percent:r}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center mt-8",children:s.jsxs("span",{className:`text-2xl font-bold font-mono ${G(r)}`,children:[r,"%"]})})]}),s.jsx("div",{className:"text-xs text-text-secondary font-mono mt-2",children:t?`${y(t.used)} / ${y(t.total)}`:"â€”"}),t&&s.jsx(Vt,{total:t.total,used:t.used,cached:t.cached,buffers:t.buffers})]})}),er=l.memo(function(){const t=m(n=>n.snapshot?{pct:Math.round(n.snapshot.swap.percent),used:n.snapshot.swap.used_bytes,total:n.snapshot.swap.total_bytes}:null,_),r=(t==null?void 0:t.pct)??0;return s.jsxs(v,{className:"flex flex-col",children:[s.jsx(C,{children:"Swap"}),s.jsxs("div",{className:"relative h-28 flex items-end justify-center",children:[s.jsx(se,{percent:r}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center mt-8",children:s.jsxs("span",{className:`text-2xl font-bold font-mono ${G(r)}`,children:[r,"%"]})})]}),s.jsx("div",{className:"text-xs text-text-secondary font-mono mt-2",children:t?t.total>0?`${y(t.used)} / ${y(t.total)}`:"No swap":"â€”"})]})});function tr(e,t){return e.datasets.length!==t.datasets.length?!1:e.datasets.every((r,n)=>r.data===t.datasets[n].data)}const rr=Array(Kt).fill(""),ze=l.memo(function({datasets:t}){const r=l.useRef(null),n=l.useRef(null);return l.useEffect(()=>{if(!r.current)return;const o=r.current.getContext("2d");if(o)return n.current=new te(o,{type:"line",data:{labels:rr,datasets:t.map(c=>({label:c.label,data:[...c.data],borderColor:c.color,backgroundColor:c.color+"1a",borderWidth:1.5,pointRadius:0,tension:.3,fill:!0}))},options:{animation:!1,responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!1},y:{display:!0,grid:{color:"#2a2d3e"},ticks:{color:"#8892a4",font:{size:10,family:"JetBrains Mono, monospace"},maxTicksLimit:4,callback:c=>{const a=typeof c=="number"?c:parseFloat(c);return nr(a)+"/s"}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}),()=>{var c;(c=n.current)==null||c.destroy(),n.current=null}},[]),l.useEffect(()=>{const o=n.current;o&&(t.forEach((c,a)=>{o.data.datasets[a]&&(o.data.datasets[a].data=[...c.data])}),o.update("none"))},[t]),s.jsx("canvas",{ref:r,className:"block w-full h-full"})},tr);function nr(e){return e<1024?e.toFixed(0)+" B":e<1024**2?(e/1024).toFixed(1)+" K":e<1024**3?(e/1024**2).toFixed(1)+" M":(e/1024**3).toFixed(1)+" G"}const sr=l.memo(function(){const[t,r]=m(o=>o.netHistory,_),n=[{label:"Recv",color:"#3ddc84",data:t},{label:"Sent",color:"#f87171",data:r}];return s.jsxs(v,{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(C,{className:"mb-0",children:"Network"}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-mono text-text-secondary",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-green",children:"â€”"})," Recv"]}),s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-red",children:"â€”"})," Sent"]})]})]}),s.jsx("div",{className:"h-36",children:s.jsx(ze,{datasets:n})})]})}),or=l.memo(function(){const[t,r]=m(o=>o.diskIOHistory,_),n=[{label:"Read",color:"#4c9ef5",data:t},{label:"Write",color:"#a78bfa",data:r}];return s.jsxs(v,{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(C,{className:"mb-0",children:"Disk I/O"}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-mono text-text-secondary",children:[s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-blue",children:"â€”"})," Read"]}),s.jsxs("span",{children:[s.jsx("span",{className:"text-accent-purple",children:"â€”"})," Write"]})]})]}),s.jsx("div",{className:"h-36",children:s.jsx(ze,{datasets:n})})]})});function $(e){return e==null?"â€”":y(e)+"/s"}const cr=l.memo(function(){const t=m(r=>{var n;return((n=r.snapshot)==null?void 0:n.network)??[]},_);return s.jsxs(v,{children:[s.jsx(C,{children:"Network Interfaces"}),s.jsx("div",{className:"overflow-auto max-h-64 pr-2",children:s.jsxs("table",{className:"w-full text-xs font-mono",children:[s.jsx("thead",{className:"sticky top-0 bg-bg-card z-10",children:s.jsxs("tr",{className:"text-text-muted border-b border-border-base",children:[s.jsx("th",{className:"text-left pb-2 pr-4",children:"Interface"}),s.jsx("th",{className:"text-right pb-2 pr-4",children:"â†“ Recv/s"}),s.jsx("th",{className:"text-right pb-2 pr-4",children:"â†‘ Sent/s"}),s.jsx("th",{className:"text-right pb-2 pr-4",children:"Total Recv"}),s.jsx("th",{className:"text-right pb-2 pr-4",children:"Total Sent"})]})}),s.jsx("tbody",{children:t.map(r=>s.jsxs("tr",{className:"border-b border-border-base last:border-0",children:[s.jsx("td",{className:"py-1.5 pr-4 text-accent-blue",children:r.interface}),s.jsx("td",{className:"py-1.5 pr-4 text-right text-accent-green",children:$(r.recv_bps)}),s.jsx("td",{className:"py-1.5 pr-4 text-right text-accent-red",children:$(r.sent_bps)}),s.jsx("td",{className:"py-1.5 pr-4 text-right text-text-secondary",children:y(r.total_recv)}),s.jsx("td",{className:"py-1.5 pr-4 text-right text-text-secondary",children:y(r.total_sent)})]},r.interface))})]})})]})}),ar=l.memo(function({percent:t,className:r=""}){const n=Math.min(100,Math.max(0,t)),o=U(n);return s.jsx("div",{className:`w-full h-1.5 bg-border-base rounded-full overflow-hidden ${r}`,children:s.jsx("div",{className:"h-full rounded-full transition-[width] duration-300",style:{width:`${n}%`,background:o}})})});function ir(e,t){var r,n,o,c;return e.disk.percent===t.disk.percent&&e.disk.used_bytes===t.disk.used_bytes&&((r=e.io)==null?void 0:r.read_bps)===((n=t.io)==null?void 0:n.read_bps)&&((o=e.io)==null?void 0:o.write_bps)===((c=t.io)==null?void 0:c.write_bps)}const lr=l.memo(function({disk:t,io:r}){const n=Math.round(t.percent);return s.jsxs(v,{children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-text-primary truncate",children:t.mountpoint}),s.jsxs("div",{className:"text-[10px] text-text-muted font-mono mt-0.5",children:[t.device," Â· ",t.fstype]})]}),s.jsxs("span",{className:`text-sm font-bold font-mono ml-2 shrink-0 ${G(n)}`,children:[n,"%"]})]}),s.jsx(ar,{percent:n,className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-text-secondary mt-1",children:[s.jsxs("span",{children:["Used: ",y(t.used_bytes)]}),s.jsxs("span",{children:["Free: ",y(t.free_bytes)]}),s.jsxs("span",{children:["Total: ",y(t.total_bytes)]})]}),r&&s.jsxs("div",{className:"flex justify-between text-[10px] font-mono mt-1.5",children:[s.jsxs("span",{children:["R: ",s.jsx("span",{className:"text-accent-blue",children:$(r.read_bps)})]}),s.jsxs("span",{children:["W: ",s.jsx("span",{className:"text-accent-purple",children:$(r.write_bps)})]})]})]})},ir),ur=l.memo(function(){const t=m(o=>{var c;return((c=o.snapshot)==null?void 0:c.disks)??[]},_),r=m(o=>{var c;return((c=o.snapshot)==null?void 0:c.disk_io)??[]},_);function n(o){const c=o.device.split("/").pop()??"";return r.find(a=>a.device===c||o.device.includes(a.device))}return t.length===0?s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3",children:"Storage"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:[0,1,2,3].map(o=>s.jsx("div",{className:"h-24 bg-bg-card border border-border-base rounded-card"},o))})]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3",children:"Storage"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:t.map(o=>s.jsx(lr,{disk:o,io:n(o)},o.mountpoint))})]})}),dr={primary:"bg-accent-blue text-bg-primary hover:opacity-90",danger:"bg-accent-red text-bg-primary hover:opacity-90",ghost:"bg-transparent border border-border-base text-text-secondary hover:bg-bg-card-hover"},he=l.memo(function({variant:t="primary",className:r="",children:n,...o}){return s.jsx("button",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-base transition-opacity disabled:opacity-50 disabled:cursor-not-allowed ${dr[t]} ${r}`,...o,children:n})}),fr=l.memo(function({className:t=""}){return s.jsx("span",{className:`inline-block w-3.5 h-3.5 border-2 border-text-muted border-t-accent-blue rounded-full animate-spin ${t}`})}),mr=l.memo(function(){const t=m(u=>u.scanPath),r=m(u=>u.setScanPath),n=m(u=>u.scanResult),{startScan:o,cancelScan:c,isScanning:a}=ke(),i=n?n.status==="done"?"Scan complete":n.status==="error"?"Error: "+n.error:n.status==="running"?"Scanning "+n.path+"â€¦":"":"";return s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-text-secondary",children:[a&&s.jsx(fr,{}),i&&s.jsx("span",{children:i})]}),s.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),placeholder:"Path to scan",className:"bg-bg-primary border border-border-base rounded-base px-3 py-1.5 text-xs font-mono text-text-primary focus:outline-none focus:border-accent-blue"}),s.jsx(he,{variant:"primary",onClick:o,disabled:a,children:"Scan"}),a&&s.jsx(he,{variant:"danger",onClick:c,children:"Cancel"})]})});function xr(e){return e>50?"#f87171":e>20?"#fbbf24":"#4c9ef5"}const hr=l.memo(function e({entry:t,parentSize:r,depth:n}){const[o,c]=l.useState(n<2),[a,i]=l.useState(n<2),u=r>0?t.dsize/r*100:100,x=u.toFixed(1)+"%",d=xr(u),f=t.is_dir&&t.children&&t.children.length>0,h=()=>{if(!f)return;const p=!o;c(p),p&&!a&&i(!0)};return s.jsxs("li",{className:"list-none",children:[s.jsxs("div",{className:"flex items-center gap-1.5 py-0.5 px-1 rounded hover:bg-bg-card-hover cursor-pointer group",onClick:h,children:[s.jsx("span",{className:"w-3 text-text-muted text-[10px] select-none",children:f?o?"â–¾":"â–¸":" "}),s.jsx("span",{className:"text-sm",children:t.is_dir?"ðŸ“":"ðŸ“„"}),s.jsx("span",{className:"text-xs text-text-primary font-mono truncate flex-1 min-w-0",title:t.name,children:t.name}),s.jsx("div",{className:"w-20 h-1.5 bg-border-base rounded-full overflow-hidden shrink-0",children:s.jsx("div",{className:"h-full rounded-full",style:{width:Math.min(100,u)+"%",background:d}})}),s.jsx("span",{className:"text-[10px] font-mono w-10 text-right shrink-0",style:{color:d},children:x}),s.jsx("span",{className:"text-[10px] font-mono text-text-secondary w-16 text-right shrink-0",children:y(t.dsize)})]}),f&&a&&s.jsx("ul",{className:`ml-5 border-l border-border-base pl-2 ${o?"":"hidden"}`,children:t.children.map((p,g)=>s.jsx(e,{entry:p,parentSize:t.dsize,depth:n+1},g))})]})}),pr=l.memo(function({result:t}){return t.root?s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3 text-xs font-mono text-text-secondary",children:[s.jsxs("span",{children:["Path: ",s.jsx("strong",{className:"text-accent-blue",children:t.path})]}),s.jsxs("span",{children:["Total: ",s.jsx("strong",{className:"text-text-primary",children:y(t.total_size)})]}),s.jsxs("span",{children:["Scanned: ",new Date(t.scanned_at).toLocaleString()]})]}),s.jsx("ul",{className:"space-y-0.5",children:s.jsx(hr,{entry:t.root,parentSize:t.total_size,depth:0})})]}):s.jsx("p",{className:"text-text-secondary text-sm py-4",children:"No scan data available."})}),yr=l.memo(function(){const t=m(r=>r.scanResult);return s.jsxs(v,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-2",children:[s.jsx(C,{className:"mb-0",children:"Storage Analyzer (ncdu)"}),s.jsx(mr,{})]}),(t==null?void 0:t.status)==="done"&&t.root&&s.jsx(pr,{result:t})]})});function br(){return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx(Xt,{}),s.jsx(Zt,{}),s.jsx(er,{})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(sr,{}),s.jsx(or,{})]}),s.jsx(cr,{}),s.jsx(ur,{}),s.jsx(yr,{})]})}function gr(){const{fetchStatus:e}=ke(),t=l.useCallback(()=>{e()},[e]);return Ut(t),qt(),s.jsx(Bt,{children:s.jsx(Je,{children:s.jsx(Ye,{path:"/*",element:s.jsx(br,{})})})})}function jr(){return s.jsx(Ke,{children:s.jsx(gr,{})})}const Ie=document.getElementById("root");if(!Ie)throw new Error("No #root element found");pe(Ie).render(s.jsx(l.StrictMode,{children:s.jsx(jr,{})}));
